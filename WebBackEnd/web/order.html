<!DOCTYPE html>
<html>
<head>
    <title>Order</title>
    <script src="js/jquery.min.js"></script>
    <link href="bootstrap/dist/css/bootstrap.css" rel='stylesheet' type='text/css'/>
    <script src="bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="js/responsiveslides.min.js"></script>
    <script src="js/helpFunction.js"></script>
    <script src="js/browsing.js"></script>
    <script src="js/user.js"></script>
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>


    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <!--webfont-->
    <link href='http://fonts.useso.com/css?family=Lato:100,300,400,700,900' rel='stylesheet' type='text/css'>

</head>
<body>
<!---->
<div class="header single">
    <div class="container">
        <div class="header-left">
            <div class="top-menu">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="browsing.html">Futures Browsing</a></li>
                    <li class="active"><a href="order.html" id="orderHref">Order</a></li>
                    <li><a href="orderblotter.html" id="tradeHref">Trade</a></li>
                </ul>

                <script>
                    $("span.menu").click(function ()
                    {
                        $(".top-menu ul").slideToggle("slow", function ()
                        {
                        });
                    });
                </script>

            </div>
        </div>

        <div class="header-right">

            <div class="signin" >
                <ul class="notLogin" style="display: block">
                    <li><a href="registration.html">REGISTRATION</a> <span>/</span> &nbsp;</li>
                    <li><a href="login.html"> LOGIN</a></li>
                </ul>
                <ul class="Logined" style="display: none" >
                    <li><nobr id="username"></nobr> <span></span> &nbsp;</li>
                    <li><a onclick="logout()"> LOGOUT</a></li>
                </ul>
            </div>
        </div>
        <div class="clearfix"></div>
    </div>
</div>


<div class="men-futures">
    <div class="view-container">
        <div class="col-md-9 futures">
            <div class="product-price">

                <div class="product-name">
                    <h2>Orders To Be Processed</h2>
                    <h4>Sell</h4>
                </div>

                <div class="table-responsive" id="sellProducts">
                    <table class="table table-bordered mb30">
                        <thead>
                        <tr>
                            <th>OrderId</th>
                            <th>Product</th>
                            <th>OrderType</th>
                            <th>Broker</th>
                            <th>Price</th>
                            <th>Quantity</th>
                            <th>Cancel</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr>
                            <td>1</td>
                            <td>Nature Gas</td>
                            <th>Limit</th>
                            <td>M </td>
                            <td>176</td>
                            <td>100</td>
                            <td><a href="#"> <span class="glyphicon glyphicon-remove"></span> </a></td>
                        </tr>

                        </tbody>
                    </table>
                </div>

                <div class="product-name">
                    <h4>Buy</h4>
                </div>
                <div class="table-responsive" id="buyProducts">
                    <table class="table table-bordered mb30">
                        <thead>
                        <tr>
                            <th>OrderId</th>
                            <th>Product</th>
                            <th>OrderType</th>
                            <th>Broker</th>
                            <!--<th>Time</th>-->
                            <th>Quantity</th>
                            <th>Cancel</th>
                        </tr>
                        </thead>
                        <tbody>

                        <tr>
                            <td>1</td>
                            <td>Nature Gas</td>
                            <th>Limit</th>
                            <td>M </td>
                            <!--<td>2016/4/30</td>-->
                            <td>100</td>
                            <td><a href="#"> <span class="glyphicon glyphicon-remove"></span> </a></td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <!-- table-responsive -->


            </div>
            <a class="addneworder" style="display: none">ADD NEW ORDER</a>
            <br>
        </div>
    </div>
    <div class="col-md-3 side-bar">
        <div id="filter">

        </div>
        <!--<div class="name-searching">-->
        <!--<h4>Search</h4>-->
        <!--<ul>-->
        <!--<input type="text" placeholder="search by futures" required/>-->
        <!--<input type="button" value="Ok">-->
        <!--</ul>-->
        <!--</div>-->

    </div>
    <div class="clearfix"></div>
</div>
<div class="order">
    <button type="button" class="close">
    &times;
    </button>
    <div class="col-md-11 reg-form">
        <div class="reg">
            <form id="orderForm" onsubmit="return addOrder()">
                <ul>
                    <li class="text-info">Broker:</li>
                    <li>
                        <select class="form-control" id="broker-select" name="brokerId">
                            <!--<option value="2">1111</option>-->
                            <!--<option value="3">1111</option>-->
                        </select>
                    </li>
                </ul>
                <ul>
                    <li class="text-info">Product:</li>
                    <li>
                        <select class="form-control" id="product-select" name="productId">

                        </select>
                    </li>
                </ul>
                <ul>
                    <li class="text-info">Buy/Sell:</li>
                    <label class="checkbox-inline">
                        <input type="radio" name="isSell"
                               value=1 checked> Sell
                    </label>
                    <label class="checkbox-inline">
                        <input type="radio" name="isSell"
                               value=0 > Buy
                    </label>
                </ul>

                <ul>
                    <li class="text-info" >Type:</li>
                    <li id="type-select">
                        <label class="checkbox-inline" >
                            <input type="radio" name="type"
                                   value="MARKET" checked> MARKET
                        </label>
                        <label class="checkbox-inline">
                            <input type="radio" name="type"
                                   value="LIMIT" > LIMIT
                        </label>
                        <label class="checkbox-inline">
                            <input type="radio" name="type"
                                   value="STOP"> STOP
                    </label>
                    </li>
                </ul>
                <ul class="condition">


                </ul>
                <ul>
                    <li class="text-info">Price:</li>
                    <li><input type="text" value="" name="price"></li>
                </ul>

                <ul>
                    <li class="text-info">Quantity:</li>
                    <li><input type="text" value="" name="quantity"></li>
                </ul>

                <input class="orderbutton" type="submit" value="Add Order">

            </form>
        </div>
    </div>

</div>
<script type="text/javascript">


</script>

<!---->
<div class="footer" style=" position:absolute;
    bottom: 0px; text-align: center; width: 100%;">
    <div class="container">
        <p class="copyright">Copyright &copy; 2016. All rights reserved.
    </div>
</div>
<!---->
</body>
<script>
    $(document).ready(function () {
        //弹出登录
        $(".addneworder").hover(function ()
                {
                    $(this).stop().animate({opacity: '1'}, 600);
                },
                function ()
                {
                    $(this).stop().animate({opacity: '0.6'}, 1000);
                }).on('click', function ()
        {
            $("body").append("<div id='mask'></div>");
            $("#mask").addClass("mask").fadeIn("fast");
            $(".order").fadeIn("fast");
        });

        //关闭
        $(".orderbutton").hover(function ()
        {
            $(this).css({color: 'black'})
        }, function ()
        {
            $(this).css({color: '#999'})
        }).on('click', function ()
        {
            $(".order").fadeOut("fast");
            $("#mask").css({display: 'none'});
        });

        $(".close").on('click',function () {
            $(".order").fadeOut("fast");
            $("#mask").css({display: 'none'});
        });

        $("#broker-select").on("change",
            modiProductSelect
        );

        $("#type-select").on("change",modiCondition);
        var username=getCookie("username");
        if(username==null) username="";
        showLoginInfo(username);
        ajax("Query", "get", {
            action: "userList",
            filter: JSON.stringify({
                username: username
            })
        }, function (data) {
            var user = JSON.parse(data);
            var userid = user[0].id;
            var role=user[0].role;
            if(role=="TRADER")
                    $(".addneworder").show();
            var filterStr=JSON.stringify({
                brokerId: userid,
                status: ["DOING","TODO"]
            });
            if(role=="TRADER")
                filterStr=JSON.stringify({
                    userId: userid,
                    status: ["DOING","TODO"]
                });
            ajax("Query","get",{
                action:"orderList",
                filter: filterStr

            },function (orderStr) {
               // alert(sellStr);
                var orderArr=JSON.parse(orderStr);
                showAllOrders(orderArr);
                showFilter('product','Order',orderArr);
                showFilter('type','Order',orderArr);
                if(role=="TRADER")
                        showFilter('broker','Order',orderArr);
                ajax("Query","get",{
                    action:"userList",
                    filter:JSON.stringify({
                        role:"BROKER"
                    })
                },function (userStr) {
                    //alert(userStr);
                    var userJson=JSON.parse(userStr);
                    modiBrokerSelect(userJson);
                    modiProductSelect();
                    modiCondition();
                });
            });
        });

    });

</script>
</html>
		